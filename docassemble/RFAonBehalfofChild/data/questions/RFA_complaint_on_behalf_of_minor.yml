comment: |
  Idea is to ask this at start of main RFA interview (after the edited screening questions):
  Who needs protection?
  If just the user, follow current RFA interview order
  If both user and kids, follow current RFA interview order
  If only OBO child, follow this new RFA OBA interview order

  
  Keep working on OBO review screen items
  Need help with   - Edit children[0].relationship_users1  and Edit request_not_abuse_children and edit children custody
  
  For merging in my RFA for minors

  Use a code block like this one
  mandatory: True
  code: |
    if have_school_age_children:
      divorce_with_kids_attachment.enabled = True
      divorce_no_kids_attachment.enabled = False
    else:
      divorce_with_kids_attachment.enabled = False
      divorce_no_kids_attachment.enabled = True
  
  But with this block in the interview, delete enabled=True from all the complaints and affidavits because they are the ones that depend on the situation, and True = always true here!
  
  objects:
    - RFAcomplaintonbehalfofminor_Post_interview_instructions: ALDocument.using(title="Instructions", filename="rfacomplaintonbehalfofminor_next_steps.docx", enabled=True, has_addendum=False)
  - RFAcomplaintonbehalfofminor_attachment: ALDocument.using(title="RFA Complaint on behalf of a child or children", filename="5_RFA_complaint_on_behalf_of_minor", enabled=True, has_addendum=False, )

  
  This interview includes the questions specific to RFA on behalf of child. 
  I built this by running the OBO Complaint through the Weaver. Need to add Affidavit, too.
  Try to include OBO CHILD in the id name if the question is tailored for that situation
  Get the OBO questions working and OBO review working and the Complaint PDF filled in
  Then pull in the affidavit
  It looks like these petitioners also do the other two forms
  



---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALAnyState:any_state.yml
---
metadata:
  title: >-
    Relief from Abuse order on behalf of a child or children
  short title: >-
    RFA on behalf of child
  description: |-
    This interview helps someone in Vermont ask the court for a Relief from Abuse order on behalf of a child or children.
  tags: []
  authors:
    - VTCourtForms by Legal Services Vermont
  allowed_courts: 
    - "Family Court"
  typical_role: "plaintiff"
  al_weaver_version: "1.10.3"
  generated_on: "2023-12-05"
---
code: |
  # This controls the default country and list of states in address field questions
  AL_DEFAULT_COUNTRY = "US"
---
code: |
  # This controls the default state in address field questions
  AL_DEFAULT_STATE = "VT"
---
code: |
  github_repo_name =  'docassemble-Rfacomplaintonbehalfofminor'
---
code: |
  interview_short_title = "Ask the court for a Relief from Abuse order on behalf of a child or children"
---
code: |
  al_form_type = "starts_case" 
---
objects:
  - users: ALPeopleList.using(ask_number=True,target_number=1)
  - other_parties: ALPeopleList.using(ask_number=True,target_number=1)
  - children: ALPeopleList.using(ask_number=True,complete_attribute="complete")
---
sections:
  - review_rfacomplaintonbehalfofminor: Review your answers
---
#################### Interview order #####################
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_rfa_obo_minor
code: |
  # Set the allowed courts for this interview
  allowed_courts = ['Family Court']
  #nav.set_section("review_rfacomplaintonbehalfofminor")
  user_role = "plaintiff"
  user_ask_role = "plaintiff"
  
  who_needs_protection  
  if who_needs_protection["order_obo_child"]:
    danger_more_abuse
    if danger_more_abuse:
      get_kids_in_danger
    request_not_abuse_children
    if request_temp_PRR:
      get_kids_relationships
      other_children_PRR
    
    users.gather()
    users[0].name.first
    users[0].birthdate
    children.gather()
    children[0].name.first
    children[0].birthdate
    other_parties.gather()
    other_parties[0].name.first
    other_parties[0].birth_month
    other_parties[0].address.address
    parent_guardian
    incarcerated
    children1_no_shelter
    set_progress(12)
    serious_incident_date
    danger_more_abuse
    if danger_more_abuse:
      get_kids_in_danger
    request_not_abuse_children
    if request_temp_PRR:
      get_kids_relationships
      other_children_PRR
    request_all_emergency
    existing_order
    trial_court
    docket_number
    set_progress(90)
  RFA_complaint_on_behalf_of_minor_preview_question
  signature_date
  al_form_requires_digital_signature = False
  basic_questions_signature_flow    
  interview_order_rfa_obo_minor = True
---
###################### Main order ######################
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  rfacomplaintonbehalfofminor_intro
  interview_order_rfa_obo_minor
  signature_date
  # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "reached_interview_end": True,
      },
  )
  rfacomplaintonbehalfofminor_download
---
comment: |
  This question is used to introduce your interview. Please customize
id: Relief_from_Abuse_order_on_behalf_of_a_child_or_children
continue button field: rfacomplaintonbehalfofminor_intro
question: |
  Relief from Abuse order on behalf of a child or children
subquestion: |
  This interview will help you ask the court for a Relief from Abuse order on behalf of a child or children.
  
---
---
# Edit this on main interview so it can handle all situations
id: Gather defendant name
sets:
  - other_parties[0].name.first
  - other_parties[0].name.last
question: |
  Name of defendant
fields:
  - note: The "defendant" is the person who is abusing you. EDIT THIS ON MAIN INTERVIEW TO -- The person who is abusing you or the children is called the "defendant".
  - First Name: other_parties[0].name.first
  - Middle Name: other_parties[0].name.middle
    required: False
  - Last Name: other_parties[0].name.last
  - Suffix: other_parties[0].name.suffix
    choices: 
      - Jr
      - Sr
      - I
      - II
      - III
    required: False
---
---
id: birthdate question
question: |
  When was ${ other_parties[0].name } born?
subquestion: |
  If you don’t know their birth date, leave the first fields blank. Be sure to give an estimated age, however.
fields:
  - Month: other_parties[0].birth_month
    choices:
      - January: 1
      - February: 2
      - March: 3
      - April: 4
      - May: 5
      - June: 6
      - July: 7
      - August: 8
      - September: 9
      - October: 10
      - November: 11
      - December: 12
    required: False
  - Day: other_parties[0].birth_day
    datatype: integer
    code: |
      range(1,31+1)
    required: False
  - Year: other_parties[0].birth_year
    code: |
      list(range(today().year, today().year - 100 - 1, -1))
    required: False
  - note: |
      **About how old is ${ other_parties }?**
  - Age: other_parties_estimated_age
    datatype: integer
    code: |
      range(1,100+1)
---
id: ask defendant address
continue button field: ask_defendant_address
question: |
  What is the defendant's home address?
subquestion: |
  The court will need an address of some kind. Include what you can of the defendant's home address. Later in this interview you can give the address where they work or where they are staying. **You will need to provide at least one address.**
fields:
  - I don't know the defendant's home address: defendant_address_unknown
    datatype: yesno
    css class: indent-me
    disable others: True
  - Defendant's address: other_parties[0].address
    datatype: object_radio
    choices:
      - users[0].address if defined("users[0].address.address") else None
    object labeler: |
      lambda y: y.on_one_line()
    none of the above: |
      Somewhere else
    disable others: True      
    show if:
      code: |
        defined("users[0].address.address")
  - ${ users[0].address.address_label}: other_parties[0].address.address
    address autocomplete: True
  - ${ users[0].address.unit_label}: other_parties[0].address.unit
    required: False
  - ${ users[0].address.city_label}: other_parties[0].address.city
  - ${ users[0].address.state_label}: other_parties[0].address.state
    code: |
      states_list(country_code=AL_DEFAULT_COUNTRY)
    default: ${ AL_DEFAULT_STATE }
  - ${ users[0].address.zip_label}: other_parties[0].address.zip
    required: False      
  - ${ users[0].address.country_label}: other_parties[0].address.country
    code: countries_list()
    default: ${ AL_DEFAULT_COUNTRY }
---
code: |
  children[i].name.first
  children[i].birthdate
  children[i].complete=True
  children.there_are_any=True
---
code: |
  for child in children: 
    child.custody_wanted
  get_kids_relationships = True
---
id: how many children
question: |
  % if al_form_type in ['starts_case','existing_case','appeal']:
  Are any children involved in this abuse case? 
  % else:
  Are any children involved in this matter?
  % endif  
fields:
  - note: |
      Include children under 18 who have been affected by abuse. Also include children who you would like to ask for temporary custody of.
  - no label: children.there_are_any
    datatype: yesnoradio
  - How many?: children.target_number
    datatype: integer
    show if: children.there_are_any
validation code: |
  if not children.there_are_any:
    children.target_number = 0
---
id: OBO CHILD how children related to you and defendant
question: |
  Relationship to the child or children
fields:
  - note: |
      **Your relationship to them**
  - "In a word or two, what is your relationship to the child or children?": users1_relationship_to_children1
    maxlength: 22
  - note: |
      **Defendant's relationship to them**
      
      Now choose the best description of the defendant's relationship to the child or children. The "defendant" is the person who is abusing the child/children.
    
      Choose one.
  
  - "Parent or guardian": parent_guardian
    datatype: yesno
  - "Family member": family_member
    datatype: yesno
  - "Family member description": family_member_description
    maxlength: 22
    show if: family_member
  - "Person who lives or has lived in the household with the child": live_together
    datatype: yesno
  - "Child and defendant have or have had a dating relationship": dating
    datatype: yesno
  - "Other relationship": other_relationship
    datatype: yesno
  - "Other relationship description": other_relationship_description
    maxlength: 22
    show if: other_relationship
validation code: |
  if [parent_guardian, family_member, live_together, dating, other_relationship].count(True) == 0:
    validation_error("Please select one option.")
  if [parent_guardian, family_member, live_together, dating, other_relationship].count(True) > 1:
    validation_error("Please select one option.")
---
---
id: initial_screening_questions_3
question: |
  See if this interview is right for your situation - EDIT THIS ON MAIN RFA FORM to say Who needs protection and include the bolding I added and the new variable names
fields:
  - "Who needs protection from abuse?": who_needs_protection
    datatype: checkboxes
    none of the above: False
    minlength: 1
    choices:
      - "I need this order to protect **me only**": order_for_me
      - "I need this order to protect **me and my child or children**": order_for_both
      - "I’m asking for an RFA order **only on behalf of a child or children** under the age of 18": order_obo_child
  - note: |
      On the next screen we'll ask about you, the person filling out this form. You are the petitioner or plaintiff.
---
id: Existing orders or court proceedings
question: |
  Existing orders or court proceedings
subquestion: |
  Is there an existing court order or a pending court proceeding involving you, the defendant, and/or your child or children? 
  
  Don't include things you plan to do. Only include things that have been submitted to the court already.
fields:  
  - "Select all that apply": existing_order
    datatype: checkboxes
    required: False
    choices:
      - "For divorce or separation?": existing_order_divorce
      - "For a civil union dissolution?": dissolution
      - "For Relief from Abuse?": existing_order_RFA
      - "For a criminal matter?": criminal_proceeding
      - "For parentage?": parentage_order
      - "For guardianship?": guardianship_order
      - "For a juvenile (DCF) matter?": juvenile_order
      - "For child support?": child_support_order
    none of the above: false
  - "In what state(s) is the existing order or a pending court proceeding?": existing_order_state
    maxlength: 34
    required: False
    js show if: |
      val("existing_order['existing_order_divorce']") || val("existing_order['dissolution']") || val("existing_order['existing_order_RFA']") || val("existing_order['criminal_proceeding']") || val("existing_order['parentage_order']") || val("existing_order['guardianship_order']") || val("existing_order['juvenile_order']") || val("existing_order['child_support_order']") 
      
  - "In what county/counties is the existing order or a pending court proceeding?": existing_order_county
    maxlength: 36
    required: False
    js show if: |
      val("existing_order['existing_order_divorce']") || val("existing_order['dissolution']") || val("existing_order['existing_order_RFA']") || val("existing_order['criminal_proceeding']") || val("existing_order['parentage_order']") || val("existing_order['guardianship_order']") || val("existing_order['juvenile_order']") || val("existing_order['child_support_order']") 
      
  - "What is the name of your attorney for the existing order or a pending court proceeding -- if you have one?": existing_order_users_attorney
    maxlength: 25
    required: False
    js show if: |
      val("existing_order['existing_order_divorce']") || val("existing_order['dissolution']") || val("existing_order['existing_order_RFA']") || val("existing_order['criminal_proceeding']") || val("existing_order['parentage_order']") || val("existing_order['guardianship_order']") || val("existing_order['juvenile_order']") || val("existing_order['child_support_order']")
      
  - "What is the name of the other attorney for the existing order or a pending court proceeding -- if the defendant has one?": existing_order_OP_attorney
    maxlength: 25
    required: False
    js show if: |
      val("existing_order['existing_order_divorce']") || val("existing_order['dissolution']") || val("existing_order['existing_order_RFA']") || val("existing_order['criminal_proceeding']") || val("existing_order['parentage_order']") || val("existing_order['guardianship_order']") || val("existing_order['juvenile_order']") || val("existing_order['child_support_order']") 
---
id: OBO CHILD serious incident of child abuse what happened
question: |
  What happened -- most serious incident
subquestion: |
  This is where you will describe the **most serious** incident of abuse. Be as detailed as possible. The judge needs to know exactly what happened. If you don't give enough details, you may not get an RFA order.
  
  See the [VTLawHelp.org legal help website](https://vtlawhelp.org/roadmap/relief-from-abuse/step-3#forms) for tips on what to include in your description. This information will be part of your "Affidavit". 
  
  Note: **The defendant will get a copy of the affidavit** if the judge approves a temporary order or if the case goes to a hearing.
fields:
  - "When was the most serious incident?": serious_incident_date
    maxlength: 14
  - note: |
      If you know the exact date, use this date format mm/dd/yyyy. If you don’t, it’s OK to type something short like “December 20XX.”
      
      **What did the defendant do to the child or children?**
      
      Select all that apply.
      
  - "Abused them (physically injured or otherwise treated them in a manner which placed the child’s life, health, development or welfare in jeopardy.)": serious_incident_abused
    datatype: yesno
  - "Defendant is a parent or legal guardian and either (1) inflicted physical punishmentout of anger, or (2) physically punished them in an excessive, unreasonable, or cruel manner.": other_parties1_parent_abuse
    datatype: yesno
  - "Stalked them as defined in 12 V.S.A. §5131(6).": serious_incident_stalked_children
    datatype: yesno
  - "Sexually assaulted or sexually abused them as defined in 15 V.S.A. §5131(5).": serious_incident_assault
    datatype: yesno
  - "Attempted to cause or caused physical harm to them.": serious_incident_harm
    datatype: yesno
  - "Placed them in fear of imminent serious physical harm.": serious_incident_fear
    datatype: yesno
validation code: |
  if [serious_incident_abused, other_parties1_parent_abuse, serious_incident_stalked_children, serious_incident_assault, serious_incident_harm, serious_incident_fear].count(True) == 0:
    validation_error("Please select at least one option.")
---
id: OBO CHILD danger of more abuse
question: |
  Danger of more abuse
fields:
  - "Is there danger of more abuse to the child or children?": danger_more_abuse
    datatype: yesnoradio
#  - "There is danger of further abuse to ${ children[0] }": children[0].in_danger
#    datatype: yesno
#    show if: danger_more_abuse
#  - "There is danger of further abuse to the other children in the household": danger_more_abuse_other_children
#    datatype: yesno
#    js hide if: |
#      val("danger_more_abuse['False']") || val("children.target_number['1']")

---
code: |
  for child in children: 
    child.in_danger
    #child.relationship_users1
    #child.relationship_OP
  get_kids_in_danger = True
---
id: childrens custody relationships
generic object: Individual     
question: |
  Custody of ${x.name.first}
fields:
  - I want temporary custody of ${x.name.first}: x.custody_wanted
    datatype: yesnoradio
  - "In 1 or 2 words, what is ${x.name.first}'s relationship to you?": x.relationship_users1
    maxlength: 19
    show if: x.custody_wanted
  - "What is ${x.name.first}'s relationship to the defendant?": x.relationship_OP
    maxlength: 21
    show if: x.custody_wanted
---
id: children in danger relationships
generic object: Individual     
question: |
  About ${x.name.first}
fields:
  - Is ${x.name.first} in danger of more abuse?: x.in_danger
    datatype: yesnoradio
  - "In 1 or 2 words, what is ${x.name.first}'s relationship to you?": x.relationship_users1
    maxlength: 19
    show if: x.in_danger
  - "What is ${x.name.first}'s relationship to the defendant?": x.relationship_OP
    maxlength: 21
    show if: x.in_danger
    
---
    

#  - "Children1 relationship to users1": children1_relationship_users1
#    maxlength: 19
#  - "Children1 relationship to OP": children1_relationship_OP
#    maxlength: 21
#  - "Children2 relationship to users1": children2_relationship_users1
#    maxlength: 19
#  - "Children2 relationship to OP": children2_relationship_OP
#    maxlength: 21
#  - "Children3 relationship users1": children3_relationship_users1
#    maxlength: 19
#  - "Children3 relationship to OP": children3_relationship_OP
#    maxlength: 21
---    
id: OBO more about the situation    
question: |
  More about the situation
fields:    
  - note: |
      Select all that apply to this situation.
  - "Defendant is incarcerated and has been convicted of one of the crimes specified in 15 V.S.A. §1103(c)(1)(B) ${ display_template(list_of_crimes, scrollable=True, collapse=True) }": incarcerated
    datatype: yesno
  - "Defendant has used, displayed, or threatened to use a firearm against the children or against a family member.": used_firearm
    datatype: yesno
  - "The child or children will be forced to leave their current home and will be without shelter unless defendant is ordered to leave the residence.  IF YES, JUMP TO REGULAR RFA QUESTIONS ABOUT SHARED HOME id: About your home continued": children1_no_shelter
    datatype: yesno
  - "The home is located at": residence_shared_address
    maxlength: 25
  - "The home is owned.": residence_owned
    datatype: yesno
  - "The home is rented.": residence_rented
    datatype: yesno
  - "Residence of users1": residence_of_users1
    datatype: yesno
  - "Residence of both": residence_of_both
    datatype: yesno
  - "Residence of other": residence_of_other
    datatype: yesno
  - "Residence of OP": residence_of_OP
    datatype: yesno
---
id: OBO CHILD what you want to ask for in the RFA order
question: |
  What you want to ask for in the RFA order
subquestion: |
  This is a list of things that you can ask the court for. If approved, they will be part of the Relief from Abuse order.
  
  **Choose all that apply to you.** 

  I want the court to:
  
fields:
  - "Order defendant to not abuse the children and not interfere with their personal liberty.": request_not_abuse_children
    datatype: yesno
  - "Order defendant to refrain (stop) from stalking or sexually abusing the children.": request_no_stalking_assault
    datatype: yesno
  - "Order defendant to vacate (leave) the residence immediately and award sole possession of the residence to me (the petitioner caring for the children.)": request_leave
    datatype: yesno
  - "Order defendant not to possess or buy firearms for the duration of the order.": request_no_firearms
    datatype: yesno
  - "Order defendant to surrender immediately all firearms (guns) under defendant’s ownership, possession, or control to law enforcement.": request_surrender_firearms
    datatype: yesno
  - "Order defendant to refrain from (stop) cruelly treating the pets of the parties or the pets of the children.": request_no_pet_harm
    datatype: yesno
  - "Award temporary possession and control of any pets owned by the parties or by the children to me (the petitioner).": request_control_of_pet
    datatype: yesno
  - "Order defendant to stay away from the children.": request_stay_away
    datatype: yesno
  - "How many feet away? (300 feet is the standard stay-away order)": request_stay_away_feet
    maxlength: 6
    show if: request_stay_away
  - "Order defendant to refrain from contacting the minor children in any way.": request_no_contact_children
    datatype: yesno
  - "Award me (the petitioner) temporary custody (Parental Right and Responsibilities) of the children.) (Children of you and the defendant.)": request_temp_PRR
    datatype: yesno
  - note: If you choose custody, we will ask for the names of the children on the next screen.
    show if: request_temp_PRR
  - "Order defendant’s contact with the children to be supervised.": request_supervised_contact
    datatype: yesno
  - "Supervised by this person:": supervisor1_name
    maxlength: 13
    show if: request_supervised_contact
  - "At this location:": supervisor1_location
    maxlength: 27
    show if: request_supervised_contact
  - note: |
      A location might be "Grandfather's house" or "Sister-in-law's home"
    show if: request_supervised_contact
  - "Order exchanges of the children for parent-child contact take place at a certain location.": request_children_exchange
    datatype: yesno
  - "At this location:": supervisor2_location
    maxlength: 22
    show if: request_children_exchange
  - note: |
      A location might be "Grandmother's house" or "Aunt's home"
    show if: request_children_exchange
  - "Supervised by this person:": supervisor2_name
    maxlength: 22
    show if: request_children_exchange
  - "Order defendant to not take any regulated drug unless it is prescribed to defendant by a physician or drink alcohol for at least 8 hours prior to a scheduled contact or during contact with the children and that petitioner may cancel scheduled contact if defendant appears to be under the influence of intoxicating substances (drugs/alcohol).": request_no_drug_or_alcohol
    datatype: yesno
  - "Order defendant to not physically punish the children in any way.": request_no_punish
    datatype: yesno
  - "Order defendant to pay temporary child support for the children.": request_child_support
    datatype: yesno
  - "I want to request something else.": request_other
    datatype: yesno
  - "Describe what you want. Start with a phrase like 'Order the defendant to ...'": request_other_description
    maxlength: 80
    show if: request_other
    hint: Order the defendant to ...
---   
id: custody of other kids
question: |
  Custody of other children in the household
fields:
  - "I want custody of other children who I have not listed already": other_children_PRR
    datatype: yesno
  - "Names of other children. Separate with commas.": other_children_PRR_names
    maxlength: 68
    show if: other_children_PRR

---
id: Emergency order
question: |
  Asking for your order to go into effect right away
subquestion: |
  Do you want all of your requests to be put in place now — in an emergency order? Most people choose **Yes** to get protection as soon as possible.
fields:
  - "I request on an emergency basis the same relief as requested above, to the extent available.": request_all_emergency
    datatype: yesnoradio
---
id: preview RFA_complaint_on_behalf_of_minor
question: |
  Preview your form before you sign it
subquestion: |
  Here is a preview of the form you will sign on the next page.   
  
  ${ al_user_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit answers" button
  to edit your answers.

  ${ action_button_html(url_action('review_rfacomplaintonbehalfofminor'), label='Edit answers', color='info') }
  
  Remember to come back to this window to continue and sign your form.
continue button field: RFA_complaint_on_behalf_of_minor_preview_question    
---
code: |
  signature_fields = ['users[0].signature']
---
code: |
  # This is a placeholder for the addresses that will be searched
  # for matching address to court. Edit if court venue is based on 
  # a different address than the user's
  [user.address.address for user in users.complete_elements()]
  addresses_to_search = [user.address for user in users.complete_elements()]
---







#####OBO CHILD items for review screen#####
---
id: OBO CHILD rfacomplaintonbehalfofminor review screen
event: review_rfacomplaintonbehalfofminor
#need:
  #- children.danger
question: |
  Review your answers
review:
  - Edit: users1_relationship_to_children1
    button: |
      OBO Your relationship to child or children:
      **${ users1_relationship_to_children1 }**
  - Edit: parent_guardian
    button: |
      OBO Defendant's relationship to the child or children:
      
      % if parent_guardian:
      - **Parent or guardian**
      % endif
      
      % if family_member:
      - **Family member: ${ family_member_description }**
      % endif
      
      % if live_together:
      - **Person who lives or has lived in the household with the child**
      % endif      
      
      % if dating:
      -**Child and defendant have or have had a dating relationship**
      % endif      
      
      % if other_relationship:
      - **Other relationship: ${ other_relationship_description }**
      % endif
  - Edit: serious_incident_date
    button: |
      OBO Date of most serious incident:
      **${ serious_incident_date }**
      
  - Edit: serious_incident_abused
    button: |
      OBO Incident of abuse -- What happened
      
      The defendant did this:
      
      % if serious_incident_abused:
      - **Abused the child (physically injured or otherwise treated the child in a mannerwhich placed the child’s life, health, development or welfare in jeopardy.)**
      % endif
      
      % if other_parties1_parent_abuse:
      - **Defendant is a parent/legal guardian and either (1) inflicted physical punishmentout of anger, or (2) physically punished the child in an excessive, unreasonable, or cruel manner.**
      % endif      
      
      % if serious_incident_stalked_children:
      - **Stalked the child/children as defined in 12 V.S.A. §5131(6).**
      % endif
      
      % if serious_incident_assault:
      - **Sexually assaulted or sexually abused the child/children as defined in 15 V.S.A. §5131(5).**
      % endif      
      
      % if serious_incident_harm:
      - **Attempted to cause or caused physical harm to the child/children.**
      % endif      
      
      % if serious_incident_fear:
      - **Placed the child/children in fear of imminent serious physical harm.**
      % endif      
      


  - Edit: used_firearm
    button: |
      OBO Defendant has used, displayed, or threatened to use a firearm against the child(ren) or against a family member.:
      ${ word(yesno(used_firearm)) }

  - Edit: children1_no_shelter
    button: |
      OBO The child(ren) will be forced to leave their current home and will be without shelter unless Defendant is ordered to leave the residence.:
      ${ word(yesno(children1_no_shelter)) }

  - Edit: request_not_abuse_children
    button: |
      OBO What you want in the RFA order:
      
      - **Order Defendant not abuse child(ren) and not interfere with their personal liberty.**:
      ${ word(yesno(request_not_abuse_children)) }
      
      - **Order Defendant refrain from stalking or sexually abusing the child(ren).**:
      ${ word(yesno(request_no_stalking_assault)) }
      
      - **Order Defendant vacate immediately the residence (identified above) and sole possession be awarded to the Petitioner caring for the child(ren).**:
      ${ word(yesno(request_leave)) }
      
      - **Order Defendant not to possess or purchase firearms for the duration of the order.**:
      ${ word(yesno(request_no_firearms)) }
      
      - **Order Defendant to surrender immediately all firearms under Defendant’s ownership, possession, or control to law enforcement.**:
      ${ word(yesno(request_surrender_firearms)) }
      
      - **Order Defendant refrain from cruelly treating the pet(s) of the parties or the pet(s) of the child(ren).**:
      ${ word(yesno(request_no_pet_harm)) }
      
      - **Award temporary possession and control of any pet(s) owned by the parties or by the child(ren) to the Petitioner.**:
      ${ word(yesno(request_control_of_pet)) }
      
      - **Order Defendant to stay away from the child(ren).**:
      ${ word(yesno(request_stay_away)) }
      
      % if request_stay_away_feet != '':
      - **This many feet:**:
      ${ request_stay_away_feet }
      % endif
      
      - **Order Defendant to refrain from contacting the minor child(ren) in any way.**:
      ${ word(yesno(request_no_contact_children)) }
      
      - **Award the Petitioner temporary custody (Parental Right and Responsibilities) for the child(ren) (Child(ren) of the Petitioner and Defendant).**:
      ${ word(yesno(request_temp_PRR)) }
      
      - **Order Defendant’s contact with the child(ren) supervised.**:
      ${ word(yesno(request_supervised_contact)) }
      
      % if supervisor1_name != '':
      - **Supervised by:**:
      ${ supervisor1_name }
      % endif
      
      % if supervisor1_location != '':
      - **At this location:**:
      ${ supervisor1_location }
      % endif
      
      - **Order exchanges of the child(ren) for parent child contact take place at a certain location.**:
      ${ word(yesno(request_children_exchange)) }
      
      % if supervisor2_location != '':
      - **At this location:**:
      ${ supervisor2_location }
      % endif
      
      % if supervisor2_name != '':
      - **Supervised by:**:
      ${ supervisor2_name }
      % endif
      
      - **Order Defendant not to take any regulated drug unless it is prescribed to Defendant by a physician or drink alcohol for at least 8 hours prior to a scheduled contact or during contact with the child(ren) and that Petitioner may cancel scheduled contact if Defendant appears to be under the influence of intoxicating substances (drugs/alcohol).**:
      ${ word(yesno(request_no_drug_or_alcohol)) }
      
      - **Order Defendant not physically punish the child(ren) in any way.**:
      ${ word(yesno(request_no_punish)) }
      
      - **Order Defendant to pay temporary child support for the child(ren).**:
      ${ word(yesno(request_child_support)) }      
      
      - **Request something else.**:
      ${ word(yesno(request_other)) }: ${ request_other_description }
      
  - Edit: danger_more_abuse
    button: |
      - OBO There is danger of more abuse to the child or children:
      **${ word(yesno(danger_more_abuse)) }**
  - note: | 
      ##Children  ADD THIS HEADER TO RFA INTERVIEW##      
  - Edit: children.revisit
    button: |
      % for item in children:
        **${ item }**
        
        - Birthdate: ${ item.birthdate }
        
      % endfor      

  - Edit: children[0].in_danger
    button: |
      % if children[0].in_danger:
      OBO **${ showifdef('children[0]') }** is in danger of more abuse
      
      - ${ showifdef('children[0].name.first') }'s relationship to you: ${ showifdef('children[0].relationship_users1') }
      
      - ${ showifdef('children[0].name.first') }'s relationship to defendant: ${ showifdef('children[0].relationship_users1') }
      % else:
      **${ showifdef('children[0]') }** is **not** in danger of more abuse      
      % endif 
  - Edit: children[1].in_danger
    button: |
      % if children[1].in_danger:
      OBO **${ showifdef('children[1]') }** is in danger of more abuse
      
      - ${ showifdef('children[1].name.first') }'s relationship to you: ${ showifdef('children[1].relationship_users1') }
      
      - ${ showifdef('children[1].name.first') }'s relationship to defendant: ${ showifdef('children[1].relationship_users1') }
      % else:
      **${ showifdef('children[1]') }** is **not** in danger of more abuse
      % endif 
  - Edit: children[2].in_danger
    button: |
      % if children[2].in_danger:
      OBO **${ showifdef('children[2]') }** is in danger of more abuse
      - ${ showifdef('children[2].name.first') }'s relationship to you: ${ showifdef('children[2].relationship_users1') }
      - ${ showifdef('children[2].name.first') }'s relationship to defendant: ${ showifdef('children[2].relationship_users1') }
      % else:
      **${ showifdef('children[2]') }** is **not** in danger of more abuse
      % endif 
  - Edit: children[0].custody_wanted
    button: |
      % if children[0].custody_wanted:
      - CHANGE THIS LAYOUT ON RFA INTERVIEW You want custody of **${ showifdef('children[0]') }**
      % else:
      - You do **not** want custody of **${ showifdef('children[0]') }**      
      % endif
  - Edit: children[1].custody_wanted
    button: |
      % if children[1].custody_wanted:
      - You want custody of **${ showifdef('children[1]') }**
      % else:
      - You do **not** want custody of **${ showifdef('children[1]') }**      
      % endif
  - Edit: other_children_PRR
    button: |
      - You want custody of other children, too.:
      **${ word(yesno(other_children_PRR)) }**
      
      % if other_children_PRR_names != '':
      - Names of other children you want custody of.:
      **${ other_children_PRR_names }**
      % endif





  - Edit: docket_number
    button: |
      **Docket number**:
      ${ docket_number }

  - Edit: other_parties.revisit
    button: |
      **Other parties**

      % for item in other_parties:
        * ${ item }
      % endfor
  - Edit: users.revisit
    button: |
      **Users**

      % for item in users:
        * ${ item }
      % endfor
  - Edit: request_all_emergency
    button: |
      **The Petitioner requests on an emergency basis the same relief as requested above, to the extent available.**:
      ${ word(yesno(request_all_emergency)) }
  - Edit: residence_shared_address
    button: |
      **The home is located at**:
      ${ residence_shared_address }
  - Edit: incarcerated
    button: |
      **Defendant is incarcerated and has been convicted of one of the crimes specified in 15 V.S.A. §1103(c)(1)(B).**:
      ${ word(yesno(incarcerated)) }      
  - Edit: residence_owned
    button: |
      **The home is owned.**:
      ${ word(yesno(residence_owned)) }
  - Edit: residence_rented
    button: |
      **The home is rented.**:
      ${ word(yesno(residence_rented)) }
  - Edit: residence_of_users1
    button: |
      **Residence of users1**:
      ${ word(yesno(residence_of_users1)) }
  - Edit: residence_of_both
    button: |
      **Residence of both**:
      ${ word(yesno(residence_of_both)) }
  - Edit: residence_of_other
    button: |
      **Residence of other**:
      ${ word(yesno(residence_of_other)) }
  - Edit: residence_of_OP
    button: |
      **Residence of OP**:
      ${ word(yesno(residence_of_OP)) }
  - Edit: signature_date
    button: |
      **Date of signature**:
      ${ signature_date }
---
continue button field: children.revisit
question: |
  Edit children
subquestion: |
  ${ children.table }

  ${ children.add_action() }

---
table: children.danger
rows: children
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - In danger of more abuse: |
      row_item.in_danger if defined("row_item.in_danger") else ""
  - Relationship to you: |
      row_item.relationship_users1 if defined("row_item.relationship_users1") else ""
  - Relationship to defendant: |
      row_item.relationship_OP if defined("row_item.relationship_OP") else ""
edit:
  - in_danger
  #- relationship_users1
  #- relationship_OP
confirm: True
---
table: children.table
rows: children
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Birthdate: |
      row_item.birthdate if defined("row_item.birthdate") else ""
edit:
  - name.first
  - birthdate
confirm: True
---
continue button field: other_parties.revisit
question: |
  Edit other_parties
subquestion: |
  ${ other_parties.table }

  ${ other_parties.add_action() }
---
table: other_parties.table
rows: other_parties
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Birthdate: |
      row_item.birthdate if defined("row_item.birthdate") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.city") else ""
edit:
  - name.first
  - birthdate
  - address.city
confirm: True

---
continue button field: users.revisit
question: |
  Edit users
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Birthdate: |
      row_item.birthdate if defined("row_item.birthdate") else ""
  - Signature: |
      row_item.signature if defined("row_item.signature") else ""
edit:
  - name.first
  - birthdate
  - signature
confirm: True
---
---
template: list_of_crimes
subject: See the list of crimes
content: |
  Those crimes are:
  
  * murder
  
  * attempted murder
  
  * kidnapping
  
  * domestic assault
  
  * aggravated domestic assault
  
  * sexual assault
  
  * aggravated sexual assault
  
  * stalking
  
  * aggravated stalking
  
  * lewd or lascivious conduct with a child
  
  * use of a child in a sexual performance, or
  
  * consenting to a sexual performance.
---
---
id: download rfacomplaintonbehalfofminor
event: rfacomplaintonbehalfofminor_download
question: |
  All done
subquestion: |
  Thank you. Your form is ready to download and deliver.
  
  View, download and send your form below. Click the "Edit answers" button to fix any mistakes.

  ${ action_button_html(url_action('review_rfacomplaintonbehalfofminor'), label='Edit answers', color='info') }
  
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

progress: 100
---
# ALDocument objects specify the metadata for each template
objects:
  - RFAcomplaintonbehalfofminor_Post_interview_instructions: ALDocument.using(title="Instructions", filename="rfacomplaintonbehalfofminor_next_steps.docx", enabled=True, has_addendum=False)
  - RFAcomplaintonbehalfofminor_attachment: ALDocument.using(title="RFA Complaint on behalf of a child or children", filename="5_RFA_complaint_on_behalf_of_minor", enabled=True, has_addendum=False, )
---
# Bundles group the ALDocuments into separate downloads, such as for court and for the user
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[RFAcomplaintonbehalfofminor_Post_interview_instructions, RFAcomplaintonbehalfofminor_attachment], filename="5_RFA_complaint_on_behalf_of_minor", title="All forms to download for your records", enabled=True)
  #- al_court_bundle: ALDocumentBundle.using(elements=[5_RFA_complaint_on_behalf_of_minor],  filename="5_RFA_complaint_on_behalf_of_minor", title="All forms to deliver to court", enabled=True)
---
# Each attachment defines a key in an ALDocument. We use `i` as the placeholder here so the same template is 
# used for "preview" and "final" keys, and logic in the template checks the value of 
# `i` to show or hide the user's signature
attachment:
  name: Post-interview-Instructions
  filename: RFAcomplaintonbehalfofminor_next_steps
  docx template file: rfacomplaintonbehalfofminor_next_steps.docx
  variable name: RFAcomplaintonbehalfofminor_Post_interview_instructions[i]
  skip undefined: True
  tagged pdf: True
---
attachment:
  name: 5 RFA_complaint_on_behalf_of_minor
  filename: 5_RFA_complaint_on_behalf_of_minor
  variable name: RFAcomplaintonbehalfofminor_attachment[i]
  skip undefined: True
  pdf template file: 5_RFA-complaint-on-behalf-of-minor.pdf
  fields:
      - "trial_court_county": ${ trial_court.address.county }
      - "docket_number": ${ docket_number }
      - "children1_name": ${ children[0] }
      - "children1_name": ${ children[0] }
      - "children1_name": ${ children[0] }
      - "children1_birthdate": ${ format_date(children[0].birthdate, format='M/d/yyyy') }
      - "children1_birthdate": ${ format_date(children[0].birthdate, format='M/d/yyyy') }
      - "children1_birthdate": ${ format_date(children[0].birthdate, format='M/d/yyyy') }
      - "other_parties1_name": ${ other_parties[0] }
      - "other_parties1_name": ${ other_parties[0] }
      - "other_parties1_birthdate": >-
          ${ "/".join([str(f) for f in [other_parties[0].birth_month, other_parties[0].birth_day, other_parties[0].birth_year] if f]) }
      - "users1_name": ${ users[0] }
      - "users1_birthdate": ${ format_date(users[0].birthdate, format='M/d/yyyy') }
      - "users1_relationship_to_children1": ${ users1_relationship_to_children1 }
      - "other_parties1_address_address": ${ other_parties[0].address.address }
      - "other_parties1_address_state": ${ other_parties[0].address.state }
      - "other_parties1_address_zip": ${ other_parties[0].address.zip }
      - "other_parties1_address_city": ${ other_parties[0].address.city }
      - "parent_guardian": ${ parent_guardian }
      - "family_member_description": ${ family_member_description }
      - "family_member": ${ family_member }
      - "live_together": ${ live_together }
      - "dating": ${ dating }
      - "other_relationship_description": ${ other_relationship_description }
      - "other_relationship": ${ other_relationship }
      - "existing_order_divorce_yes": ${ existing_order["existing_order_divorce"] }
      - "existing_order_divorce_no": ${ not existing_order["existing_order_divorce"] }
      - "dissolution_yes": ${ existing_order["dissolution"] }
      - "dissolution_no": ${ not existing_order["dissolution"] }
      - "existing_order_RFA_yes": ${ existing_order["existing_order_RFA"] }
      - "existing_order_RFA_no": ${ not existing_order["existing_order_RFA"] }
      - "criminal_proceeding_yes": ${ existing_order["criminal_proceeding"] }
      - "criminal_proceeding_no": ${ not existing_order["criminal_proceeding"] }
      - "parentage_order_yes": ${ existing_order["parentage_order"] }
      - "parentage_order_no": ${ not existing_order["parentage_order"] }
      - "guardianship_order_yes": ${ existing_order["guardianship_order"] }
      - "guardianship_order_no": ${ not existing_order["guardianship_order"] }
      - "child_support_order_yes": ${ existing_order["child_support_order"] }
      - "child_support_order_no": ${ not existing_order["child_support_order"] }
      - "juvenile_order_yes": ${ existing_order["juvenile_order"] }
      - "juvenile_order_no": ${ not existing_order["juvenile_order"] }
      - "existing_order_state": ${ existing_order_state }
      - "existing_order_county": ${ existing_order_county }
      - "existing_order_users_attorney": ${ existing_order_users_attorney }
      - "existing_order_OP_attorney": ${ existing_order_OP_attorney }
      - "serious_incident_date": ${ serious_incident_date.format() }
      - "serious_incident_yes": ${ True }
      - "serious_incident_abused": ${ serious_incident_abused }
      - "other_parties1_parent_abuse": ${ other_parties1_parent_abuse }
      - "serious_incident_stalked_children": ${ serious_incident_stalked_children }
      - "serious_incident_assault": ${ serious_incident_assault }
      - "serious_incident_harm": ${ serious_incident_harm }
      - "serious_incident_fear": ${serious_incident_fear }
      - "Is there an existing order or a pending court proceeding involving you the Defendant andor the children in this": ${ existing_order }
      - "Civil Union Dissolution": ${ Civil_Union_Dissolution }
      - "danger_more_abuse": ${ danger_more_abuse }
      - "danger_more_abuse_children": ${ children[0].in_danger }
      - "danger_more_abuse_other_children": |
          % if children[1].in_danger or children[2].in_danger:
          True
          % else:
          False
          % endif
      - "children1_relationship_users1": ${ children[0].relationship_users1 }
      - "children1_relationship_users1": ${ children[0].relationship_users1 }
      - "children1_relationship_OP": ${ children[0].relationship_OP }
      - "children1_relationship_OP": ${ children[0].relationship_OP }
      - "children2_name": ${ children[1] }
      - "children2_name": ${ children[1] }
      - "children2_birthdate": ${ format_date(children[1].birthdate, format='M/d/yyyy') }
      - "children2_birthdate": ${ format_date(children[1].birthdate, format='M/d/yyyy') }
      - "children2_relationship_users1": ${ children[1].relationship_users1 }
      - "children2_relationship_users1": ${ children[1].relationship_users1 }
      - "children2_relationship_OP": ${ children[1].relationship_OP }
      - "children2_relationship_OP": ${ children[1].relationship_OP }
      - "children3_name": ${ children[2] }
      - "children3_name": ${ children[2] }
      - "children3_birthdate": ${ format_date(children[2].birthdate, format='M/d/yyyy') }
      - "children3_birthdate": ${ format_date(children[2].birthdate, format='M/d/yyyy') }
      - "children3_relationship_users1": ${ children[2].relationship_users1 }
      - "children3_relationship_users1": ${ children[2].relationship_users1 }
      - "children3_relationship_OP": ${ children[2].relationship_OP }
      - "children3_relationship_OP": ${ children[2].relationship_OP }
      - "used_firearm": ${ used_firearm }
      - "incarcerated": ${ incarcerated }
      - "children1_no_shelter": ${ children1_no_shelter }
      - "residence_shared_address": ${ residence_shared_address }
      - "residence_owned": ${ residence_owned }
      - "residence_rented": ${ residence_rented }
      - "residence_of_users1": ${ residence_of_users1 }
      - "residence_of_both": ${ residence_of_both }
      - "residence_of_other": ${ residence_of_other }
      - "residence_of_OP": ${ residence_of_OP }
      - "request_not_abuse_children": ${ request_not_abuse_children }
      - "request_no_stalking_assault": ${ request_no_stalking_assault }
      - "request_leave": ${ request_leave }
      - "request_no_firearms": ${ request_no_firearms }
      - "request_surrender_firearms": ${ request_surrender_firearms }
      - "request_no_pet_harm": ${ request_no_pet_harm }
      - "request_control_of_pet": ${ request_control_of_pet }
      - "request_stay_away_feet": ${ request_stay_away_feet }
      - "request_stay_away": ${ request_stay_away }
      - "request_no_contact_children": ${ request_no_contact_children }
      - "request_temp_PRR": ${ request_temp_PRR }
      - "other_children_PRR_names": ${ other_children_PRR_names }
      - "other_children_PRR": ${ other_children_PRR }
      - "request_supervised_contact": ${ request_supervised_contact }
      - "supervisor1_name": ${ supervisor1_name }
      - "supervisor1_location": ${ supervisor1_location }
      - "request_children_exchange": ${ request_children_exchange }
      - "supervisor2_location": ${ supervisor2_location }
      - "supervisor2_name": ${ supervisor2_name }
      - "request_no_drug_or_alcohol": ${ request_no_drug_or_alcohol }
      - "request_no_punish": ${ request_no_punish }
      - "request_child_support": ${ request_child_support }
      - "request_other_description": ${ request_other_description }
      - "request_other": ${ request_other }
      - "request_all_emergency": ${ request_all_emergency }
      - "signature_date": ${ signature_date }
      - "users1_signature": ${ users[0].signature_if_final(i) }



